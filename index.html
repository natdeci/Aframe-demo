<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ISGS</title>

    <!-- A-Frame + Plugins -->
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.1.0/dist/aframe-event-set-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/nipplejs@0.8.5/dist/nipplejs.min.js"></script>
    <script src="js/joystick.min.js"></script>
    <script src="js/info-panel.js"></script>
    <script src="js/highlight.js"></script>

    <script>
        // Consolidated JS: Run after DOM is fully loaded
        document.addEventListener("DOMContentLoaded", () => {
            // Quiz System
            initQuizSystem();
            
            // Add quiz zoom functionality
            initQuizZoom();
        });

        // Initialize quiz zoom functionality
        function initQuizZoom() {
            const quizScreen = document.querySelector("#quizMainImage");
            const quizBackBtn = document.querySelector("#quizBackBtn");
            const quizCamera = document.querySelector("#cam");
            const quizRig = document .querySelector("#rig")
            const quizOptionsContainer = document.querySelector("#quizOptionsContainer");

            // Define positions for quiz view
            const initialPosition = "-2.436 1.25 -1.741";
            const initialRotation = "0 -8.482 0";
            const quizZoomPosition = "-2.539 1.100 -1.894"; // Positioned in front of the quiz
            const quizZoomRotation = "0 -0.520 0"; // Facing the quiz directly

            quizScreen.addEventListener("click", () => {
                // Remove previous animations
                quizCamera.removeAttribute("animation__pos");
                quizCamera.removeAttribute("animation__rot");

                // Set rotation directly toward target
                quizCamera.setAttribute("rotation", quizZoomRotation);

                // Animate position (zoom in)
                quizRig.setAttribute("animation__pos", {
                    property: "position",
                    to: quizZoomPosition,
                    dur: 1000,
                    easing: "easeInOutQuad"
                });

                // Disable manual controls
                quizRig.setAttribute("movement-controls", "enabled: false");
                quizRig.setAttribute("nipple-controls", "enabled: false");

                // Show back button for quiz
                quizBackBtn.setAttribute("visible", true);
                
                // Ensure quiz options are fully interactive when zoomed in
                const options = document.querySelectorAll(".quizOption");
                options.forEach(option => {
                    option.setAttribute("material", "opacity", 0.001);
                });
            });

            quizBackBtn.addEventListener("click", () => {
                // Remove previous animations
                quizCamera.removeAttribute("animation__pos");
                quizCamera.removeAttribute("animation__rot");

                // Return to initial position and rotation
                quizRig.setAttribute("animation__pos", {
                    property: "position",
                    to: initialPosition,
                    dur: 1000,
                    easing: "easeInOutQuad"
                });

                quizCamera.setAttribute("animation__rot", {
                    property: "rotation",
                    to: initialRotation,
                    dur: 1000,
                    easing: "easeInOutQuad"
                });

                // Re-enable controls
                quizRig.setAttribute("movement-controls", "enabled: true");
                quizRig.setAttribute("nipple-controls", "enabled: true");

                // Hide back button
                quizBackBtn.setAttribute("visible", false);
                
                // Reset quiz feedback when going back to normal view
                const feedback = document.querySelector("#feedback");
                feedback.setAttribute("visible", false);
            });
        }

        // Initialize quiz functionality
        function initQuizSystem() {
            const feedback = document.querySelector("#feedback");
            const planeA = document.querySelector("#planeA");
            const planeB = document.querySelector("#planeB");
            const planeC = document.querySelector("#planeC");
            const planeD = document.querySelector("#planeD");
            
            // Store all quiz options for easy access
            const quizOptions = [planeA, planeB, planeC, planeD];

            // Add click events with improved feedback
            planeA.addEventListener("click", () => {
                feedback.setAttribute("value", "A Salah! Coba lagi.");
                feedback.setAttribute("color", "#FF0000");
                feedback.setAttribute("visible", true);
            });

            planeB.addEventListener("click", () => {
                feedback.setAttribute("value", "B Benar!");
                feedback.setAttribute("color", "#00AA00");
                feedback.setAttribute("visible", true);
                planeB.setAttribute("color", "#00AA00")
            });

            planeC.addEventListener("click", () => {
                feedback.setAttribute("value", "C Salah! Coba lagi.");
                feedback.setAttribute("color", "#FF0000");
                feedback.setAttribute("visible", true);
            });

            planeD.addEventListener("click", () => {
                feedback.setAttribute("value", "D Salah! Coba lagi.");
                feedback.setAttribute("color", "#FF0000");
                feedback.setAttribute("visible", true);
            });

            // Enhanced hover effect with more obvious visual feedback
            function addHoverEffect(plane) {
                plane.addEventListener("mouseenter", () => {
                    plane.setAttribute("material", "color: #cfd8dc; opacity: 0.5; transparent: true");
                });
                plane.addEventListener("mouseleave", () => {
                    plane.setAttribute("material", "color: transparent; opacity: 0.001; transparent: true");
                });
            }
            
            // Apply hover effects to all quiz options
            quizOptions.forEach(addHoverEffect);
            
            // Add class for easy selection
            quizOptions.forEach(option => {
                option.classList.add("quizOption");
            });
        }
    </script>
</head>

<body>
    <a-scene environment cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .raycastable" joystick>
        <!-- Model -->
        <a-entity gltf-model="#isomatric" position="5.029 0.152 -6.951" scale="1 1 1"></a-entity>

        <!-- Camera Rig -->
        <a-entity id="rig" movement-controls="controls: keyboard,nipple; speed: 0.09" nipple-controls="mode: static" position="1.211 1.25 2.202">
            <a-entity id="cam" camera rotation="0 0 0" look-controls="pointerLockEnabled: false"></a-entity>
        </a-entity>

        <script>
            window.onload = function () {
                const playButton = document.getElementById("playButton");
                const pauseButton = document.getElementById("pauseButton");
                const video = document.getElementById("bkkbn_vid");

                playButton.addEventListener("click", () => {
                    if (video.paused) {
                        video.play();
                        playButton.setAttribute("visible", "false");
                        pauseButton.setAttribute("visible", "true")
                    }
                });

                pauseButton.addEventListener("click", () => {
                    if (!video.paused) {
                        video.pause();
                        pauseButton.setAttribute("visible", "false");
                        playButton.setAttribute("visible", "true")
                    }
                });
            };
        </script>

        <!-- Video Screen -->
        <a-entity position="-4.91 1.34 1.44" rotation="0 90 0" scale="0.43 0.43 1">
            <a-video src="#bkkbn_vid" width="4" height="2.5" id="videoElement"></a-video>
        </a-entity>

        <!-- Play Button -->
        <a-image id="playButton" src="#right" position="-4.880 1.095 2.201" width="0.25" height="0.25"
            rotation="0 90 0" class="raycastable" scale="0.4 0.4 0.4"
            animation__mouseenter="property: scale; to: 0.5 0.5 0.5; dur: 200; startEvents: mouseenter"
            animation__mouseleave="property: scale; to: 0.4 0.4 0.4; dur: 200; startEvents: mouseleave">
        </a-image>

        <a-image id="pauseButton" src="#playpause" position="-4.88 0.970 2.2" width="0.25" height="0.25"
            rotation="0 90 0" class="raycastable" scale="0.4 0.4 0.4" visible="false"
            animation__mouseenter="property: scale; to: 0.5 0.5 0.5; dur: 200; startEvents: mouseenter"
            animation__mouseleave="property: scale; to: 0.4 0.4 0.4; dur: 200; startEvents: mouseleave">
        </a-image>

        <!-- Ground -->
        <a-entity position="0 0 -2" geometry="primitive: box; width: 10; height: 0.1; depth: 10"
            material="color: #ccc;"></a-entity>

        <a-assets>
            <img src="assets/ppt/slide (1).png" alt="" id="slide1" />
            <img src="assets/ppt/slide (2).png" alt="" id="slide2" />
            <img src="assets/ppt/slide (3).png" alt="" id="slide3" />
            <img src="assets/ppt/slide (4).png" alt="" id="slide4" />
            <img src="assets/ppt/slide (5).png" alt="" id="slide5" />
            <img src="assets/ppt/slide (6).png" alt="" id="slide6" />
            <img src="assets/ppt/slide (7).png" alt="" id="slide7" />
            <img src="assets/ppt/slide (8).png" alt="" id="slide8" />
            <img src="assets/ppt/slide (9).png" alt="" id="slide9" />
            <img src="assets/ppt/slide (10).png" alt="" id="slide10" />
            <img src="assets/ppt/slide (11).png" alt="" id="slide11" />
            <img src="assets/ppt/slide (12).png" alt="" id="slide12" />
            <img src="assets/ppt/slide (13).png" alt="" id="slide13" />
            <img src="assets/ppt/slide (14).png" alt="" id="slide14" />
            <img src="assets/ppt/slide (15).png" alt="" id="slide15" />
            <img src="assets/ppt/slide (16).png" alt="" id="slide16" />
            <img src="assets/ppt/slide (17).png" alt="" id="slide17" />
            <img src="assets/ppt/slide (18).png" alt="" id="slide18" />
            <img src="assets/ppt/slide (19).png" alt="" id="slide19" />
            <img src="assets/ppt/slide (20).png" alt="" id="slide20" />
            <img src="assets/ppt/slide (21).png" alt="" id="slide21" />
            <img src="assets/ppt/slide (22).png" alt="" id="slide22" />
            <img src="assets/ppt/slide (23).png" alt="" id="slide23" />
            <img src="assets/ppt/slide (24).png" alt="" id="slide24" />
            <img src="assets/ppt/slide (25).png" alt="" id="slide25" />
            <img src="assets/ppt/slide (26).png" alt="" id="slide26" />
            <img src="assets/ppt/slide (27).png" alt="" id="slide27" />
            <img src="assets/ppt/slide (28).png" alt="" id="slide28" />
            <img src="assets/ppt/slide (29).png" alt="" id="slide29" />
            <img src="assets/ppt/slide (30).png" alt="" id="slide30" />
            <img src="assets/ppt/slide (31).png" alt="" id="slide31" />
            <img src="assets/ppt/slide (32).png" alt="" id="slide32" />
            <img src="assets/ppt/slide (33).png" alt="" id="slide33" />
            <img src="assets/ppt/slide (34).png" alt="" id="slide34" />
            <img src="assets/ppt/slide (35).png" alt="" id="slide35" />
            <img src="assets/ppt/slide (36).png" alt="" id="slide36" />
            <img src="assets/ppt/slide (37).png" alt="" id="slide37" />
            <img src="assets/ppt/slide (38).png" alt="" id="slide38" />
            <img src="assets/ppt/slide (39).png" alt="" id="slide39" />
            <img src="assets/ppt/slide (40).png" alt="" id="slide40" />
            <img src="assets/ppt/slide (41).png" alt="" id="slide41" />
            <img src="assets/joystick/left.png" alt="" id="left" />
            <img src="assets/joystick/right.png" alt="" id="right" />
            <img src="assets/Frame Monitor Kanan.png" alt="" id="framekanan" />
            <img src="assets/pause.png" alt="" id="playpause" />
            <video id="bkkbn_vid" src="assets/video.mp4" preload="auto" playsinline webkit-playsinline
                crossorigin="anonymous"></video>

            <img src="assets\close-logo.png" alt="" id="backLogoImage">

            <img src="assets/Menu.png" alt="" id ="menuScreen">
            <img src="assets/quiz/Quiz 1.png" alt="" id ="quiz1">

            <a-asset-item id="messageText" src="message.html"></a-asset-item>

            <img id="kazetachinu" src="assets/bkkbn/vs1.png" crossorigin="anonymous"/>
            <img id="kazetachinuPoster" src="assets/bkkbn/poster1.png" crossorigin="anonymous"/>

            <img id="ponyo" src="assets/bkkbn/vs2.png" crossorigin="anonymous"/>
            <img id="ponyoPoster" src="assets/bkkbn/poster2.jpg" crossorigin="anonymous"/>

            <img id="karigurashi" src="assets/bkkbn/vs3.png" crossorigin="anonymous"/>
            <img id="karigurashiPoster" src="assets/bkkbn/poster3.png" crossorigin="anonymous"/>
            <a-mixin
                id="frame"
                geometry="primitive: plane; width: 0.5783552; height: 0.8192"
                material="color: white; shader: flat"
                animation__scale="property: scale; to: 0.3 0.3 0.3; dur: 200; startEvents: mouseenter"
                animation__scale_reverse="property: scale; to: 0.25 0.25 0.25; dur: 200; startEvents: mouseleave"
            ></a-mixin>
            <a-mixin
                id="poster"
                geometry="primitive: plane; width: 0.544768; height: 0.786432"
                material="color: white; shader: flat"
                material="shader: flat"
                position="0 0 0.005"
            ></a-mixin>
            <a-mixin
                id="movieImage"
                geometry="primitive: plane; width: 1.5; height: 0.81"
                material="src: #ponyo; shader: flat; transparent: true"
                position="0 0.495 0.002"
            ></a-mixin>

            <a-asset-item id="officeModel" src="models/meeting_room.glb"></a-asset-item>
            <a-asset-item id="isomatric" src="models/isometric_office.glb"></a-asset-item>
        </a-assets>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const slides = [
                    "#slide1",
                    "#slide2",
                    "#slide3",
                    "#slide4",
                    "#slide5",
                    "#slide6",
                    "#slide7",
                    "#slide8",
                    "#slide9",
                    "#slide10",
                    "#slide11",
                    "#slide12",
                    "#slide13",
                    "#slide14",
                    "#slide15",
                    "#slide16",
                    "#slide17",
                    "#slide18",
                    "#slide19",
                    "#slide20",
                    "#slide21",
                    "#slide22",
                    "#slide23",
                    "#slide24",
                    "#slide25",
                    "#slide26",
                    "#slide27",
                    "#slide28",
                    "#slide29",
                    "#slide30",
                    "#slide31",
                    "#slide32",
                    "#slide33",
                    "#slide34",
                    "#slide35",
                    "#slide36",
                    "#slide37",
                    "#slide38",
                    "#slide39",
                    "#slide40",
                    "#slide41",
                ];
                let currentIndex = 0;

                const monitor = document.querySelector("#monitor1");
                const prevBtn = document.querySelector("#prevBtn");
                const nextBtn = document.querySelector("#nextBtn");

                prevBtn.addEventListener("click", () => {
                    currentIndex = (currentIndex - 1 + slides.length) % slides.length;
                    monitor.setAttribute("src", slides[currentIndex]);
                });

                nextBtn.addEventListener("click", () => {
                    currentIndex = (currentIndex + 1) % slides.length;
                    monitor.setAttribute("src", slides[currentIndex]);
                });
            });
        </script>

        <!-- Monitor [Middle] -->
        <a-entity id="Middle Room">
            <a-entity id="monitorPPT">
                <a-image id="monitor1" src="#slide1" position="0.506 1.100 -2.351" rotation="0 -8.482 0"
                    scale="0.540 0.320 1" class="raycastable"></a-image>

                <a-image id="prevBtn" src="#left" position="0.271 0.977 -2.386" width="0.2" height="0.2"
                    class="raycastable" scale="0.200 0.200 1" rotation="0 -8.482 0"></a-image>

                <a-image id="nextBtn" src="#right" position="0.740 0.977 -2.316" width="0.2" height="0.2"
                    class="raycastable" scale="0.250 0.250 1" rotation="0 -8.482 0"></a-image>

                <a-image id="backBtn" src="#backLogoImage" position="0.740 1.230 -2.316" rotation="0 -8.482 0" width="0.2"
                    height="0.2" class="raycastable" scale="0.200 0.200 1" class="clickable" visible="false"></a-image>
            </a-entity>

            <script>
                const monitor = document.querySelector("#monitor1");
                const camera_ppt = document.querySelector("#cam");
                const rig_ppt = document.querySelector("#rig");
                const btnBack_ppt = document.querySelector("#backBtn");

                const rigZoomPos_ppt = "0.453 1.100 -1.971";
                const camZoomRot_ppt = "0 -8.709 0";

                const rigInitPos_ppt = "0.425 1.250 -1.887";
                const camInitRot_ppt = "-2.750 8.136 0";

                monitor.addEventListener("click", () => {
                    rig_ppt.removeAttribute("animation__pos");
                    camera_ppt.removeAttribute("animation__rot");

                    // Animasi zoom in
                    rig_ppt.setAttribute("animation__pos", {
                        property: "position",
                        to: rigZoomPos_ppt,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });

                    camera_ppt.setAttribute("animation__rot", {
                        property: "rotation",
                        to: camZoomRot_ppt,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });

                    // Disable controls
                    // camera_ppt.setAttribute("look-controls", "enabled: false");
                    rig_ppt.setAttribute("movement-controls", "enabled: false");
                    rig_ppt.setAttribute("nipple-controls", "enabled: false");

                    btnBack_ppt.setAttribute("visible", true);
                });

                btnBack_ppt.addEventListener("click", () => {
                    rig_ppt.removeAttribute("animation__pos");
                    camera_ppt.removeAttribute("animation__rot");

                    // Animasi zoom in
                    rig_ppt.setAttribute("animation__pos", {
                        property: "position",
                        to: rigInitPos_ppt,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });

                    camera_ppt.setAttribute("animation__rot", {
                        property: "rotation",
                        to: camInitRot_ppt,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });

                    // Disable controls
                    // camera_ppt.setAttribute("look-controls", "enabled: true");
                    rig_ppt.setAttribute("movement-controls", "enabled: true");
                    rig_ppt.setAttribute("nipple-controls", "enabled: true");

                    btnBack_ppt.setAttribute("visible", false);
                });
            </script>

            <!-- Quiz Panel -->
            <a-entity id="monitor2" class="raycastable">
                <!-- Main quiz image (clickable for zoom) -->
                <a-image id="quizMainImage" src="#quiz1" position="-2.539 1.100 -2.290" rotation="0 -0.520 0"
                    scale="0.530 0.310 1" class="raycastable"></a-image>

                <!-- Quiz Options Container -->
                <a-entity id="quizOptionsContainer">
                    <!-- Clickable planes with improved visibility -->
                    <a-plane id="planeA" position="-2.538 1.112 -2.287" rotation="0 -0.520 0" width="0.5" height="0.05"
                        material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>
                    <a-plane id="planeB" position="-2.540 1.069 -2.287" rotation="0 -0.520 0" width="0.5" height="0.05"
                        material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>
                    <a-plane id="planeC" position="-2.542 1.025 -2.287" rotation="0 -0.520 0" width="0.5" height="0.05"
                        material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>
                    <a-plane id="planeD" position="-2.542 0.981 -2.287" rotation="0 -0.520 0" width="0.5" height="0.05"
                        material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>
                </a-entity>

                <!-- Back Button for Quiz (initially hidden) -->
                <a-image id="quizBackBtn" src="#backLogoImage" position="-2.303 1.230 -2.287" width="0.2" height="0.2"
                    class="raycastable" scale="0.200 0.200 1" rotation="0 -0.520 0" visible="false"></a-image>

                <!-- Quiz Feedback -->
                <a-text value="" id="feedback" position="-2.294 1.229 -2.288" width="0.350" align="right" color="#000"
                    rotation="0 -0.520 0" visible="false"></a-text>
            </a-entity>

            <a-entity id="deskReception">
                <a-image id="monitorReception" src="#menuScreen" position="3.714 0.890 -1.773" rotation="0.028 129.450 0.000"
                    scale="0.540 0.320 1" class="raycastable"></a-image>

                <a-plane id="menuPlane1" position="3.821 0.914 -1.644" rotation="0.028 129.450 0.000" width="0.12" height="0.05"
                    material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>

                <a-plane id="menuPlane2" position="3.713 0.914 -1.775" rotation="0.028 129.450 0.000" width="0.12" height="0.05"
                    material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>

                <a-plane id="menuPlane3" position="3.609 0.914 -1.901" rotation="0.028 129.450 0.000" width="0.12" height="0.05"
                    material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>

                <a-plane id="menuPlane4" position="3.821 0.834 -1.644" rotation="0.028 129.450 0.000" width="0.12" height="0.05"
                    material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>

                <a-plane id="menuPlane5" position="3.713 0.834 -1.775" rotation="0.028 129.450 0.000" width="0.12" height="0.05"
                    material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>

                <a-plane id="menuPlane6" position="3.609 0.834 -1.901" rotation="0.028 129.450 0.000" width="0.12" height="0.05"
                    material="color: transparent; opacity: 0.001; transparent: true" class="raycastable"></a-plane>

                <a-image id="backButtonReception" src="#backLogoImage" position="3.558 1.029 -1.964" rotation="0.028 129.450 0.000" width="0.2"
                    height="0.2" class="raycastable" scale="0.200 0.200 1" class="clickable" visible="false"></a-image>
            </a-entity>

            <script>
                const camera_reception = document.querySelector("#cam");
                const rig_reception = document.querySelector("#rig");
                const monitor_reception = document.querySelector('#monitorReception')
                const btnBack_reception = document.querySelector("#backButtonReception");
                const menuPlane_1 = document.querySelector("#menuPlane1")
                const menuPlane_2 = document.querySelector("#menuPlane2")
                const menuPlane_3 = document.querySelector("#menuPlane3")
                const menuPlane_4 = document.querySelector("#menuPlane4")
                const menuPlane_5 = document.querySelector("#menuPlane5")
                const menuPlane_6 = document.querySelector("#menuPlane6")

                const menuPlanes = [menuPlane_1, menuPlane_2, menuPlane_3, menuPlane_4, menuPlane_5, menuPlane_6];

                function addHoverEffectMenu(plane) {
                    plane.addEventListener("mouseenter", () => {
                        plane.setAttribute("material", "color: #cfd8dc; opacity: 0.5; transparent: true");
                    });
                    plane.addEventListener("mouseleave", () => {
                        plane.setAttribute("material", "color: transparent; opacity: 0.001; transparent: true");
                    });
                }

                menuPlanes.forEach(addHoverEffectMenu);
    
                const rigZoomPos_reception = "3.987 0.890 -1.981";
                const camZoomRot_reception = "-0.802 128.45";
    
                const rigInitPos_reception = "4.192 1.250 -2.235";
                const camInitRot_reception = "0.757 90.298 0";

                menuPlane_1.addEventListener("click", () => {
                    rig_reception.removeAttribute("animation__pos");
                    camera_reception.removeAttribute("animation__rot");

                    camera_reception.setAttribute("look-controls", "enabled: true");
                    rig_reception.setAttribute("movement-controls", "enabled: true");
                    rig_reception.setAttribute("nipple-controls", "enabled: true");
                    rig_reception.setAttribute("position", "1.211 1.25 2.202");

                    btnBack_reception.setAttribute("visible", false);
                });

                menuPlane_2.addEventListener("click", () => {
                    rig_reception.removeAttribute("animation__pos");
                    camera_reception.removeAttribute("animation__rot");

                    camera_reception.setAttribute("look-controls", "enabled: true");
                    rig_reception.setAttribute("movement-controls", "enabled: true");
                    rig_reception.setAttribute("nipple-controls", "enabled: true");
                    rig_reception.setAttribute("position", "-3.560 1.250 2.277");

                    btnBack_reception.setAttribute("visible", false);
                });

                menuPlane_3.addEventListener("click", () => {
                    rig_reception.removeAttribute("animation__pos");
                    camera_reception.removeAttribute("animation__rot");

                    camera_reception.setAttribute("look-controls", "enabled: true");
                    rig_reception.setAttribute("movement-controls", "enabled: true");
                    rig_reception.setAttribute("nipple-controls", "enabled: true");
                    rig_reception.setAttribute("position", "0.425 1.250 -1.887"); 

                    btnBack_reception.setAttribute("visible", false);
                });

                menuPlane_4.addEventListener("click", () => {
                    rig_reception.removeAttribute("animation__pos");
                    camera_reception.removeAttribute("animation__rot");

                    camera_reception.setAttribute("look-controls", "enabled: true");
                    rig_reception.setAttribute("movement-controls", "enabled: true");
                    rig_reception.setAttribute("nipple-controls", "enabled: true");
                    rig_reception.setAttribute("position", "-2.436 1.25 -1.741");

                    btnBack_reception.setAttribute("visible", false);
                });

                menuPlane_5.addEventListener("click", () => {
                    rig_reception.removeAttribute("animation__pos");
                    camera_reception.removeAttribute("animation__rot");

                    camera_reception.setAttribute("look-controls", "enabled: true");
                    rig_reception.setAttribute("movement-controls", "enabled: true");
                    rig_reception.setAttribute("nipple-controls", "enabled: true");
                    rig_reception.setAttribute("position", "-3.268 1.250 -6.585");

                    btnBack_reception.setAttribute("visible", false);
                });

                menuPlane_6.addEventListener("click", () => {
                    
                });
    
                monitor_reception.addEventListener("click", () => {
                    // Hapus animasi sebelumnya
                    rig_reception.removeAttribute("animation__pos");
                    camera_reception.removeAttribute("animation__rot");

                    // Animasi zoom in
                    rig_reception.setAttribute("animation__pos", {
                        property: "position",
                        to: rigZoomPos_reception,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });

                    camera_reception.setAttribute("animation__rot", {
                        property: "rotation",
                        to: camZoomRot_reception,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });

                    // Disable controls
                    // camera_reception.setAttribute("look-controls", "enabled: false");
                    rig_reception.setAttribute("movement-controls", "enabled: false");
                    rig_reception.setAttribute("nipple-controls", "enabled: false");

                    // Tampilkan tombol back
                    btnBack_reception.setAttribute("visible", true);
                });
    
                btnBack_reception.addEventListener("click", () => {
                    // Hapus animasi sebelumnya
                    rig_reception.removeAttribute("animation__pos");
                    camera_reception.removeAttribute("animation__rot");
    
                    // Animasi kembali ke awal
                    rig_reception.setAttribute("animation__pos", {
                        property: "position",
                        to: rigInitPos_reception,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });
    
                    camera_reception.setAttribute("animation__rot", {
                        property: "rotation",
                        to: camInitRot_reception,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });
    
                    // Aktifkan kontrol
                    // camera_reception.setAttribute("look-controls", "enabled: true");
                    rig_reception.setAttribute("movement-controls", "enabled: true");
                    rig_reception.setAttribute("nipple-controls", "enabled: true");
    
                    // Sembunyikan tombol kembali
                    btnBack_reception.setAttribute("visible", false);
                });
            </script>

            <a-image id="monitor3" src="#event1" position="-2.543 1.1 -3.668" rotation="0 -84.710 0"
                scale="0.540 0.320 1"></a-image>

            <a-image id="monitor4" src="#youth1" position="-2.036 1.100 -3.085" rotation="0 85.631 0"
                scale="0.540 0.320 1"></a-image>

            <a-image id="monitor5" src="#birth1" position="0.394 1.100 -3.612" rotation="0 -97.874 0"
                scale="0.540 0.320 1"></a-image>
        </a-entity>

        <a-assets>
            <img src="assets/bkkbn/1.jpg" alt="" id="p1" />
            <img src="assets/bkkbn/web1.png" alt="" id="web1" />

            <img src="assets/bkkbn/p2.png" alt="" id="p2" />
            <img src="assets/bkkbn/web2.png" alt="" id="web2" />

            <img src="assets/bkkbn/p3.png" alt="" id="p3" />
            <img src="assets/bkkbn/web3.png" alt="" id="web3" />
        </a-assets>

        <!-- Monitor [2] -->
        <a-entity id="Room 1">
            <a-image id="monitorright" src="#framekanan" position="1.544 1.182 1.610" rotation="0 2.820 0"
                scale="0.540 0.320 1"></a-image>

            <a-image id="button1" src="#p1" position="1.720 1.192 1.602" rotation="0 2.820 0" scale="0.165 0.134 1"
                class="raycastable" material="opacity: 1" event-set__enter="_event: mouseenter; material.opacity: 0.6"
                event-set__leave="_event: mouseleave; material.opacity: 1"></a-image>
            <a-image id="popWeb1" src="#web1" position="1.012 1.189 1.741" rotation="0 26.394 0" visible="false"
                width="0.530" height="0.307" class="raycastable popWeb"></a-image>

            <a-image id="button2" src="#p2" position="1.543 1.218 1.611" rotation="0 2.820 0" scale="0.165 0.082 1"
                class="raycastable" material="opacity: 1" event-set__enter="_event: mouseenter; material.opacity: 0.6"
                event-set__leave="_event: mouseleave; material.opacity: 1"></a-image>
            <a-image id="popWeb2" src="#web2" position="1.012 1.189 1.741" rotation="0 26.394 0" visible="false"
                width="0.530" height="0.307" class="raycastable popWeb"></a-image>

            <a-image id="button3" src="#p3" position="1.543 1.099 1.611" rotation="0 2.820 0" scale="0.166 0.140 1"
                class="raycastable" material="opacity: 1" event-set__enter="_event: mouseenter; material.opacity: 0.6"
                event-set__leave="_event: mouseleave; material.opacity: 1"></a-image>
            <a-image id="popWeb3" src="#web3" position="1.012 1.189 1.741" rotation="0 26.394 0" visible="false"
                width="0.530" height="0.307" class="raycastable popWeb"></a-image>

            <a-image id="backButton" src="#backLogoImage" position="1.226 1.305 1.635" rotation="0 26.394 0" width="0.2"
                height="0.2" class="raycastable" scale="0.200 0.200 1" class="clickable" visible="false"></a-image>

            <a-image id="monitorleft" src="" position="1.016 1.182 1.738" rotation="0 26.394 0"
                scale="0.540 0.320 1"></a-image>
        </a-entity>

        <script>
            const popWeb = document.querySelectorAll(".popWeb");
            const camera = document.querySelector("#cam");
            const rig = document.querySelector("#rig");
            const btnBack = document.querySelector("#backButton");

            const rigZoomPos = "1.147 1.185 2.037";
            const camZoomRot = "0.573 26.471 0";

            const rigInitPos = "1.211 1.25 2.202";
            const camInitRot = "0 -29.456 0";

            popWeb.forEach((el) => {
                el.addEventListener("click", () => {
                    // Hapus animasi sebelumnya
                    rig.removeAttribute("animation__pos");
                    cam.removeAttribute("animation__rot");

                    // Animasi zoom in
                    rig.setAttribute("animation__pos", {
                        property: "position",
                        to: rigZoomPos,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });

                    cam.setAttribute("animation__rot", {
                        property: "rotation",
                        to: camZoomRot,
                        dur: 1000,
                        easing: "easeInOutQuad"
                    });

                    // Disable controls
                    // camera.setAttribute("look-controls", "enabled: false");
                    rig.setAttribute("movement-controls", "enabled: false");
                    rig.setAttribute("nipple-controls", "enabled: false");

                    // Tampilkan tombol back
                    btnBack.setAttribute("visible", true);
                });
            });

            btnBack.addEventListener("click", () => {
                // Hapus animasi sebelumnya
                rig.removeAttribute("animation__pos");
                camera.removeAttribute("animation__rot");

                // Animasi kembali ke awal
                rig.setAttribute("animation__pos", {
                    property: "position",
                    to: rigInitPos,
                    dur: 1000,
                    easing: "easeInOutQuad"
                });

                camera.setAttribute("animation__rot", {
                    property: "rotation",
                    to: camInitRot,
                    dur: 1000,
                    easing: "easeInOutQuad"
                });

                // Aktifkan kontrol
                // camera.setAttribute("look-controls", "enabled: true");
                rig.setAttribute("movement-controls", "enabled: true");
                rig.setAttribute("nipple-controls", "enabled: true");

                // Sembunyikan tombol kembali
                btnBack.setAttribute("visible", false);
            });
        </script>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const button1 = document.querySelector("#button1");
                const button2 = document.querySelector("#button2");
                const button3 = document.querySelector("#button3");
                const popWeb1 = document.querySelector("#popWeb1");
                const popWeb2 = document.querySelector("#popWeb2");
                const popWeb3 = document.querySelector("#popWeb3");

                button1.addEventListener("click", () => {
                    const isVisible = popWeb1.getAttribute("visible");

                    // Sembunyikan semua pop-up dulu
                    popWeb1.setAttribute("visible", !isVisible);
                    popWeb2.setAttribute("visible", false);
                    popWeb3.setAttribute("visible", false);
                });

                button2.addEventListener("click", () => {
                    const isVisible = popWeb2.getAttribute("visible");

                    // Sembunyikan semua pop-up dulu
                    popWeb1.setAttribute("visible", false);
                    popWeb2.setAttribute("visible", !isVisible);
                    popWeb3.setAttribute("visible", false);
                });

                button3.addEventListener("click", () => {
                    const isVisible = popWeb3.getAttribute("visible");

                    // Sembunyikan semua pop-up dulu
                    popWeb1.setAttribute("visible", false);
                    popWeb2.setAttribute("visible", false);
                    popWeb3.setAttribute("visible", !isVisible);
                });
            });
        </script>

        <a-entity id="Corner Room">
            <a-entity id="menu" highlight>
                <a-entity id="karigurashiButton" position="-3.127 1.103 -6.132" rotation = "0 -163.2 0" scale = "0.25 0.25 0.25" mixin="frame" class="raycastable menu-button">
                    <a-entity material="src: #karigurashiPoster;" mixin="poster"></a-entity>
                </a-entity>
        
                <a-entity id="kazetachinuButton" position="-3.282 1.103 -6.086" rotation = "0 -163.2 0" scale = "0.25 0.25 0.25" mixin="frame" class="raycastable menu-button">
                    <a-entity material="src: #kazetachinuPoster" mixin="poster"></a-entity>
                </a-entity>
        
                <a-entity id="ponyoButton" position="-3.439 1.103 -6.038" rotation = "0 -163.2 0" scale = "0.25 0.25 0.25" mixin="frame" class="raycastable menu-button">
                    <a-entity material="src: #ponyoPoster" mixin="poster"></a-entity>
                </a-entity>
            </a-entity>
        
                <!-- Info panel of the selected movie. -->
            <a-entity
                id="infoPanel"
                position="-3.916 1.237 -6.152"
                rotation = "0 145 0"
                info-panel
                visible="false"
                class="raycastable">
                <a-plane width="0.75" height="0.6" material="color: #333333; shader: flat;"></a-plane>

                <a-entity scale="0.5 0.4 0.4">
                    <a-entity id="ponyoMovieImage" mixin="movieImage" material="src: #ponyo" visible="false"></a-entity>
                <a-entity id="kazetachinuMovieImage" mixin="movieImage" material="src: #kazetachinu" visible="false"></a-entity>
                <a-entity id="karigurashiMovieImage" mixin="movieImage" material="src: #karigurashi" visible="false"></a-entity>
                <a-entity id="movieTitle"
                    position="-0.68 -0.1 0"
                    text="shader: msdf; anchor: left; width: 1.5; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white; value: Ponyo (2003)"></a-entity>
                <a-entity id="movieDescription"
                    position="-0.68 -0.2 0"
                    text="baseline: top; shader: msdf; anchor: left; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white; value: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."></a-entity>
                </a-entity>
            </a-entity>
        </a-entity>

        <a-entity position="5.000 1.06 -1.97" geometry="primitive: box; width: 0.1; height: 2.2; depth: 10"
            material="color: #75A166;"></a-entity>

        <a-entity position="0.004 1.06 3.049" geometry="primitive: box; width: 0.1; height: 2.2; depth: 10"
            rotation="0 90 0" material="color: #75A166;"></a-entity>

        <a-entity position="0 2.2 -2" geometry="primitive: box; width: 10; height: 0.1; depth: 10"
            material="color: #ccc;"></a-entity>
    </a-scene>
</body>

</html>